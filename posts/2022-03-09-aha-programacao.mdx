---
title: Programa√ß√£o AHA
subtitle:
description:
hero_image: "/assets/uploads/cover/programacao_aha.png"
date: 2022-03-09 19:20:00
author: Allan Ramos
category: 'Programa√ß√£o'
series: ''
---

import EmbedVideo from '../src/components/EmbedVideo';

Esse artigo √© uma tradu√ß√£o do artigo original [AHA Programming](https://kentcdodds.com/blog/aha-programming) criado por [Kent C. Dodds](https://kentcdodds.com/).

# Veja minha talk: Programa√ß√£o AHA

<EmbedVideo
  url="https://www.youtube.com/embed/wuVy7rwkCfc"
  title="AHA Programming"
/>

# DRY

[DRY (um acr√¥nimo para "Don't Repeat Yourself", traduzindo "N√£o se repita")](https://en.wikipedia.org/wiki/Don%27t_repeat_yourself), √© um antigo princ√≠pio de software que a Wikipedia resume assim:

> Cada por√ß√£o de conhecimento em um sistema deve possuir uma representa√ß√£o √∫nica, de autoridade e livre de ambiguidades em todo o sistema.

Essa geralmente √© uma boa pr√°tica que eu adoto(embora de forma menos dogm√°tica do que a defini√ß√£o encoraja). O maior problema que tive com [duplica√ß√£o de c√≥digo](https://en.wikipedia.org/wiki/Duplicate_code)(aka copia/cola, basicamente a ant√≠tese do *`DRY`*) √© perceber que tinha um bug, o corrigi, e depois encontrei esse bug de novo em outro lugar, e precisei consert√°-lo novamente.

Teve uma vez que peguei um c√≥digo que pegava pesado com essa duplica√ß√£o de c√≥digo, e precisei corrigir um bug em oito lugares diferentes! Pensa em algu√©m irritasdo! Abstrair esse c√≥digo em uma fun√ß√£o para ser chgamada de qualquer lugar, teria ajudado MUITO.

# WET

Aqui outro conceito que a galera chamou de WET(Write Everything Twice, traduzindo "Escreva tudo duas vezes"). Ele √© igualmente dogm√°tico e normativo. [Conlin Durbin](https://twitter.com/CallMeWuz) [a definiu como](https://dev.to/wuz/stop-trying-to-be-so-dry-instead-write-everything-twice-wet-5g33):

> Voc√™ pode se perguntar "Eu n√£o escrevi isso antes?" duas vezes, mas nunca tr√™s.

Nessa mesma codebase, existiam abstra√ß√µes que chegavam ao extremo, mais atrapalhando do que ajudando. Era um c√≥digo em AngularJS com muitos controllers, e era passado o `this` para uma fun√ß√£o que poderia corrigir m√©todos e propriedades para *`this`* de uma forma aprimorando a inst√¢ncia do controller com certas habilidades. Uma esp√©cie de pseudo-heran√ßa, eu acho. Foi SUPER confuso, dif√≠cil de entender, e eu fiquei com medo de fazer qualquer altera√ß√£o nessa √°rea da codebase.

O c√≥digo foi reutilizado em muito mais que tr√™s lugares, mas a abstra√ß√£o era ruim e desejei que o c√≥digo tivesse sido duplicado.

# AHA

*`AHA`* (se pronuncia "Aha!" mesmo) √© um acr√¥nico que [eu consegui de](https://twitter.com/cherthedev/status/1112819136147742720) [Cher Scarlett](https://twitter.com/cherthedev) que significa

> Avoid Hasty Abstractions(Evite abstra√ß√µes precipitadas)

A maneira como penso nesse princ√≠pio foi lindamente descrita por [Sandi Metz](https://twitter.com/sandimetz), que [escreveu](https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction):

> prefira duplica√ß√£o a uma abstra√ß√£o errada

Essa √© uma regra de ouro muito boa, e quero que voc√™ a leia novamente, ent√£o leia o post de Sandi sobre o assunto: [A Abstra√ß√£o Errada](https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction). √â fant√°stico.

Aqui est√° outro importante princ√≠pio relacionado que desejo te mostrar:

> Optimize for change first
> Otimize para mudar primeiro

Acho que o ponto chave √© que n√£o sabemos pra onde ir√° nosso c√≥digo. Podemos investir semanas otimizando e deixando o c√≥digo mais perform√°tico, ou criando a melhor API para nossa nova abstra√ßnao, apenas apra descobrir que no dia seguinte n√≥s assumimos suposi√ß√µes erradas, e a API precisar√° ser completamente refeita, ou a funcionalidade para o qual o c√≥digo foi escrito n√£o √© mais necess√°ria. N√£o sabemos com certeza. Tudo o que podemos realmente ter certeza √© que as coisas provavelmente mudar√£o, e se nunca mudarem, n√£o tocaremos no c√≥digo de qualquer maneira, ent√£o quem se importa com sua apar√™ncia?

Agora, n√£o me entenda errado, n√£o estou sugerindo anarquia. Estou sugerindo que devemos ficar atentos ao fato de que n√£o sabemos quais requisitos ser√£o colocados em nosso c√≥digo no futuro.

Ent√£o, estou tranquilo com duplica√ß√£o de c√≥digo at√© que voc√™ esteja bem confiante dos casos de uso desse c√≥digo duplicado. Quais partes do c√≥digo s√£o diferentes que dariam bons argumentos para sua fun√ß√£o? assim que voc√™ tiver alguns lugares onde esse c√≥digo est√°, as semelhan√ßas gritar√£o com voc√™ por abstra√ß√£o e voc√™ estar√° no estado de esp√≠rito para fornecer essa abstra√ß√£o.

Se voc√™ abstrair cedo, por√©m, achar√° que a fun√ß√£o ou componente √© perfeito para seu caso de uso e, portanto, apenas dobrar√° o c√≥digo para se adequar ao seu novo caso de uso. Isso continuar√° v√°rias vezes at√© que a abstra√ß√£o seja basicamente toda a sua aplica√ß√£o em instru√ß√µes de *`if`* e loops üòÇüò≠

H√° alguns anos, fui contratado para revisar a codebase de uma empresa e usei uma ferramenta chamada [jsinspect](https://github.com/danielstjules/jsinspect) para identificar peda√ßos de c√≥digo copiado/colado, e mostrar a eles oportunidades de abstra√ß√£o. Eles tinham um monte de c√≥digo duplicado e, da minha perspectiva, era √≥bvio como as abstra√ß√µes deveriam ser.

**Acho que a grande li√ß√£o** sobre programa√ß√£o "AHA" √© que voc√™ n√£o deve ser dogm√°tico sobre quando come√ßar a escrever abstra√ß√µes, mas sim escrever a abstra√ß√£o quando parecer certo, e n√£o ter medo de duplicar o c√≥digo at√© chegar l√°.

# Conclus√£o

Sinto que uma abordagem comedida e pragm√°tica aos princ√≠pios de software √© importante. Por isso eu prefiro *`AHA`* ao inv√©s de *`DRY`* ou *`WET`*. El√° √© focada em te ajudar a ficar ligado em suas abstra√ß√µes, sem fornecer regras r√≠gidas para quando √© ou n√£o certo abstrair algum c√≥digo em uma fun√ß√£o ou m√≥dulo.

Espero que tenha te ajudado. Se voc√™ est√° com abstra√ß√µes ruins at√© o talo, fique de boas. A Sandi tem algumas dicas pra voc√™ de como sair disso! [Basta ler a postagem de seu blog](https://sandimetz.com/blog/2016/1/20/the-wrong-abstraction). Boa sorte!
